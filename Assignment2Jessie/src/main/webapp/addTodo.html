<!DOCTYPE html>
<html>
	<head>
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
		<meta content="en-ie" http-equiv="Content-Language">
		<title>Assignment 2 DSS & Web Tech</title>
		<script src="js/resources/jquery-1.7.1.min.js" type="text/javascript"></script>
		<link href="css/myStylesheet.css" rel="stylesheet" type="text/css">
		<script src="js/app.js" type="text/javascript"></script>
		<script src="js/login.js" type="text/javascript"></script>
		<link rel="icon" type="image/ico" href="images/titleIco.ico">
		<script>
		
			function addButtonListeners(){
				var registerButton = document.getElementById("registerButton");
				registerButton.addEventListener("click", function(){ register(); }, false);
				var cancelButton = document.getElementById("cancelButton");
				cancelButton.addEventListener("click", function(){ cancel(); }, false);
			}
			
			function register(){
				$("#info").text("");
				if(document.getElementById("name").value == ""){
					$("#info").text("You may not leave name field blank!"); 
					return;	
				}
				if(document.getElementById("description").value == ""){
					$("#info").text("You may not leave description field blank!");
					return;
				}
				else{	
					var name = document.getElementById("name").value;
					var description = document.getElementById("description").value;
					$("#validate-status").text("");
					var currentUserName = localStorage.getItem("currentUserName");
					alert(currentUserName);
					
					getMemberAndRegisterTodo(currentUserName, document.getElementById("name").value, document.getElementById("description").value);
					
					//var todoData = {
					//		"name":document.getElementById("name").value,
					//		"description":document.getElementById("description").value
					//	};
					$("#info").text("registering item");
					//registerTodo(todoData);
					if(document.getElementById("info").value == "todo registered"){
						cancel();
					}
				}
			}
			
			function cancel(){
				document.getElementById("name").value = "";
				document.getElementById("description").value = "";
				$("#info").text("");
			}
			
		</script>
	</head>
	
	<body class="body" onload="addButtonListeners()">
		<p class="logging">logout | <a href="register.html">Register</a></p>
		<p id="heading">Assignment 2 - Jessica Ryan C08417024</p>
		<p id="welcome" class="heading">To Do List Assignment 2 DSS and Web Tech</p>
		<form class="form" id="myForm">
			<label id="formLabel">Please enter name: </label>
			<input id="name" name="name" type="text" placeholder="name" required="required"><br><br>
			<label id="formLabel">Please enter description: </label>
			<input id="description" name="description" type="text"  placeholder="description" required="required"><br><br>
			<p id="validate-status"> </p>
			<input id="registerButton" name="register" type="button" value="Submit" class="button">
			<input id="cancelButton" name="cancel" type="button" value="Cancel" class="button">
			<p id="info"></p>
		</form>
		<p id="navigation"><a href="index.html">Home</a></p>
	</body>
</html>